CREATE TABLE User (UserId int(11) NOT NULL AUTO_INCREMENT,AccountName varchar(60) NOT NULL,FirstName varchar(60) NOT NULL,LastName varchar(40) NOT NULL,BirthDate date NOT NULL,CreatedDate timestamp NOT NULL DEFAULT current_timestamp(), PRIMARY KEY (UserId), UNIQUE (AccountName), UNIQUE (FirstName, LastName));
CREATE TABLE UserRole (UserRoleId int(11) NOT NULL AUTO_INCREMENT,RoleName varchar(20) NOT NULL,Active INT NOT NULL,CreatedDate timestamp NOT NULL DEFAULT current_timestamp(), PRIMARY KEY (UserRoleId), UNIQUE (RoleName));
CREATE TABLE UserUserRole (UserId int(11) NOT NULL,UserRoleId int(11) NOT NULL,CreatedDate timestamp NULL DEFAULT current_timestamp(), PRIMARY KEY (UserId, UserRoleId), CONSTRAINT Fk_UserUserRole_User FOREIGN KEY (UserId) REFERENCES User (UserId), CONSTRAINT Fk_UserUserRole_User_Role FOREIGN KEY (UserRoleId) REFERENCES UserRole (UserRoleId));
CREATE TABLE Password (PasswordId int(11) NOT NULL AUTO_INCREMENT,UserId int(11) NOT NULL,Value varchar(80) DEFAULT NULL,Active tinyint(1) NOT NULL,CreatedDate timestamp NOT NULL DEFAULT current_timestamp(), PRIMARY KEY (PasswordId), CONSTRAINT Fk_Password_User FOREIGN KEY (UserId) REFERENCES User (UserId));
CREATE TABLE LoginAttempt (LoginAttemptId int(11) NOT NULL AUTO_INCREMENT,AccountName varchar(60) NOT NULL,Success tinyint(1) NOT NULL,CreatedDate timestamp NOT NULL DEFAULT current_timestamp(), PRIMARY KEY (LoginAttemptId), CONSTRAINT Fk_LoginAttempt_User FOREIGN KEY (AccountName) REFERENCES User (AccountName));
