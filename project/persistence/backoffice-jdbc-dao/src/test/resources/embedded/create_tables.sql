CREATE TABLE User (UserId INT(11) AUTO_INCREMENT, AccountName VARCHAR(60) NOT NULL, FirstName VARCHAR(60) NOT NULL, LastName VARCHAR(40) NOT NULL, BirthDate DATE NOT NULL, CreatedDate TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(), PRIMARY KEY (UserId), UNIQUE (AccountName));
CREATE TABLE UserRole (UserRoleId INT(11) AUTO_INCREMENT, RoleName VARCHAR(20) NOT NULL, PRIMARY KEY (UserRoleId), UNIQUE (RoleName));
CREATE TABLE UserUserRole (UserId INT(11), UserRoleId INT(11), CreateDdate TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP(), PRIMARY KEY (UserId, UserRoleId), CONSTRAINT fk_useruserrole_user FOREIGN KEY (UserId) REFERENCES User (UserId), CONSTRAINT fk_useruserrole_user_role FOREIGN KEY (UserRoleId) REFERENCES UserRole (UserRoleId));
CREATE TABLE UserStatus (UserStatusId INT AUTO_INCREMENT, UserId INT (11) NOT NULL, Active TINYINT (1) NOT NULL CHECK (Active >= 0 AND Active <= 1), PRIMARY KEY (UserStatusId), CONSTRAINT fk_user_status_user_id FOREIGN KEY (Userid) REFERENCES User(Userid));
CREATE TABLE UserPassword (UserPasswordId INT AUTO_INCREMENT, UserId INT (11) NOT NULL, Password VARCHAR(100) NOT NULL, EffDate TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(), EndDate TIMESTAMP, PRIMARY KEY (UserPasswordId), CONSTRAINT fk_user_password_user_id FOREIGN KEY (Userid) REFERENCES User (Userid));
CREATE TABLE LoginAttempt ( UserId INT(11) NOT NULL, Success TINYINT(1) NOT NULL CHECK ( Success >= 0 AND Success <= 1), CreateDdate TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP(), CONSTRAINT fk_loginattempt_user FOREIGN KEY (Userid) REFERENCES User (Userid));